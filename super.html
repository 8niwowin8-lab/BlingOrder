<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlingOrder å¾Œå° - å”®ç½„æŒ‰éˆ•ç‰ˆ</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #fffafb; display: flex; margin: 0; height: 100vh; }
        .sidebar { width: 300px; background: white; border-right: 2px solid #ffafcc; padding: 20px; }
        .menu-item { background: white; border: 1px solid #ffdee9; padding: 15px; border-radius: 10px; margin-top: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .btn-soldout { background: #ffca3a; border: none; padding: 8px; border-radius: 5px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; }
        .btn-soldout.off { background: #6c757d; color: white; }
        .btn-del { background: #eee; border: none; padding: 5px; border-radius: 5px; margin-top: 5px; width: 100%; cursor: pointer; color: #888; }
        .main { flex: 1; padding: 20px; }
        input { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn-add { background: #ff85a2; color: white; border: none; width: 100%; padding: 10px; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2 style="color:#ff85a2">âœ¨ èœå–®ç®¡ç†</h2>
        <input type="text" id="name" placeholder="é¤é»åç¨±">
        <input type="number" id="price" placeholder="åƒ¹æ ¼">
        <button class="btn-add" onclick="addItem()">ç¢ºèªä¸Šæ¶</button>
        <div id="list"></div>
    </div>
    <div class="main">
        <h2 style="color:#ff85a2">ğŸ”” å¾…è™•ç†è¨‚å–®</h2>
        <div id="orders"></div>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBTeLTAX-F5i3WHKYY0ITZsla0Qgs5e2zQ",
        authDomain: "blingorder.firebaseapp.com",
        projectId: "blingorder",
        databaseURL: "https://blingorder-default-rtdb.firebaseio.com",
        appId: "1:798993901664:web:9c2023b419ae099fe9fb05"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function addItem() {
        const name = document.getElementById('name').value;
        const price = document.getElementById('price').value;
        if(name && price) db.ref('menu/' + Date.now()).set({ name, price, isSoldOut: false });
    }

    db.ref('menu').on('value', snap => {
        const div = document.getElementById('list');
        div.innerHTML = "";
        snap.forEach(c => {
            const item = c.val();
            div.innerHTML += `
                <div class="menu-item">
                    <b>${item.name}</b> ($${item.price})
                    <button class="btn-soldout ${item.isSoldOut ? 'off' : ''}" onclick="toggle('${c.key}', ${item.isSoldOut})">
                        ${item.isSoldOut ? 'âŒ å·²å”®ç½„' : 'âœ… è²©å”®ä¸­'}
                    </button>
                    <button class="btn-del" onclick="db.ref('menu/${c.key}').remove()">åˆªé™¤é …ç›®</button>
                </div>
            `;
        });
    });

    function toggle(id, status) { db.ref('menu/' + id).update({ isSoldOut: !status }); }

    db.ref('orders').on('value', snap => {
        const div = document.getElementById('orders');
        div.innerHTML = "";
        snap.forEach(c => {
            const o = c.val();
            if(o.status === 'å¾…è™•ç†') {
                div.innerHTML += `<div style="border:2px solid #ffafcc; padding:10px; margin-bottom:10px; border-radius:10px; background:white;">
                    <b>${o.table}æ¡Œ</b> - $${o.total}<br>
                    <button onclick="db.ref('orders/${c.key}').update({status:'å·²å®Œæˆ'})" style="background:#28a745; color:white; border:none; padding:5px 10px; border-radius:5px; margin-top:10px;">å®Œæˆå‡ºé¤</button>
                </div>`;
            }
        });
    });
</script>
</body>
</html>
