<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlingOrder | ç‡Ÿæ”¶å ±è¡¨</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #fdfdfd; padding: 20px; }
        .report-header { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #ff85a2; color: white; }
        .tag-booth { color: #ff85a2; font-weight: bold; }
    </style>
</head>
<body>
<div class="report-header"><h1>ğŸ“Š æ­·å²ç‡Ÿæ”¶æ¸…å–®</h1></div>
<table>
    <thead><tr><th>æ—¥æœŸæ™‚é–“</th><th>æ¡Œè™Ÿ</th><th>é‡‘é¡</th><th>å“é …</th></tr></thead>
    <tbody id="report-body"></tbody>
</table>
<script>
    const firebaseConfig = { apiKey: "AIzaSyBTeLTAX-F5i3WHKYY0ITZsla0Qgs5e2zQ", authDomain: "blingorder.firebaseapp.com", projectId: "blingorder", databaseURL: "https://blingorder-default-rtdb.firebaseio.com", appId: "1:798993901664:web:9c2023b419ae099fe9fb05" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    db.ref('orders').orderByChild('timestamp').on('value', snap => {
        const tbody = document.getElementById('report-body'); tbody.innerHTML = "";
        snap.forEach(child => {
            const o = child.val();
            const time = new Date(parseInt(o.timestamp || child.key)).toLocaleString('zh-TW');
            const tableShow = (o.table == "åŒ…å»‚" || o.table == "7") ? "<span class='tag-booth'>ğŸ’ åŒ…å»‚</span>" : o.table + " æ¡Œ";
            tbody.innerHTML = `<tr><td>${time}</td><td>${tableShow}</td><td>$${o.total}</td><td>${o.items.join(', ')}</td></tr>` + tbody.innerHTML;
        });
    });
</script>
</body>
</html>